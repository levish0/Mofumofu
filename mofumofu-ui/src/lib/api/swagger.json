{
	"openapi": "3.1.0",
	"info": { "title": "mofumofu_tasks", "version": "0.1.0" },
	"paths": {
		"/tasks/oauth/upload-avatar": {
			"post": {
				"tags": ["oauth"],
				"summary": "Upload Oauth Profile Image",
				"description": "Google OAuth 프로필 이미지를 R2에 업로드하는 태스크를 실행",
				"operationId": "oauth-upload_oauth_profile_image",
				"requestBody": {
					"content": {
						"application/json": { "schema": { "$ref": "#/components/schemas/ProfileImageOauthUploadRequest" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/oauth/delete-avatar": {
			"delete": {
				"tags": ["oauth"],
				"summary": "Delete Oauth Profile Image",
				"description": "OAuth 프로필 이미지를 R2에서 삭제하는 태스크를 실행",
				"operationId": "oauth-delete_oauth_profile_image",
				"requestBody": {
					"content": { "application/json": { "schema": { "$ref": "#/components/schemas/ProfileImageDeleteRequest" } } },
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/avatar/upload": {
			"post": {
				"tags": ["avatar"],
				"summary": "Upload Avatar",
				"description": "사용자 아바타 이미지를 R2에 업로드하는 태스크를 실행",
				"operationId": "avatar-upload_avatar",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_avatar-upload_avatar" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/avatar/delete": {
			"delete": {
				"tags": ["avatar"],
				"summary": "Delete Avatar",
				"description": "사용자 아바타 이미지를 R2에서 삭제하는 태스크를 실행",
				"operationId": "avatar-delete_avatar",
				"requestBody": {
					"content": {
						"application/x-www-form-urlencoded": {
							"schema": { "$ref": "#/components/schemas/Body_avatar-delete_avatar" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/avatar/update": {
			"put": {
				"tags": ["avatar"],
				"summary": "Update Avatar",
				"description": "사용자 아바타 이미지를 업데이트 (기존 삭제 후 새 이미지 업로드)",
				"operationId": "avatar-update_avatar",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_avatar-update_avatar" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/banner/upload": {
			"post": {
				"tags": ["banner"],
				"summary": "Upload Banner",
				"description": "사용자 배너 이미지를 R2에 업로드하는 태스크를 실행",
				"operationId": "banner-upload_banner",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_banner-upload_banner" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/banner/delete": {
			"delete": {
				"tags": ["banner"],
				"summary": "Delete Banner",
				"description": "사용자 배너 이미지를 R2에서 삭제하는 태스크를 실행",
				"operationId": "banner-delete_banner",
				"requestBody": {
					"content": {
						"application/x-www-form-urlencoded": {
							"schema": { "$ref": "#/components/schemas/Body_banner-delete_banner" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/banner/update": {
			"put": {
				"tags": ["banner"],
				"summary": "Update Banner",
				"description": "사용자 배너 이미지를 업데이트 (기존 삭제 후 새 이미지 업로드)",
				"operationId": "banner-update_banner",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_banner-update_banner" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/post/thumbnail/upload": {
			"post": {
				"tags": ["thumbnail"],
				"summary": "Upload Thumbnail",
				"description": "포스트 썸네일 이미지를 R2에 업로드하는 태스크를 실행",
				"operationId": "thumbnail-upload_thumbnail",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_thumbnail-upload_thumbnail" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/post/thumbnail/delete": {
			"delete": {
				"tags": ["thumbnail"],
				"summary": "Delete Thumbnail",
				"description": "포스트 썸네일 이미지를 R2에서 삭제하는 태스크를 실행",
				"operationId": "thumbnail-delete_thumbnail",
				"requestBody": {
					"content": {
						"application/x-www-form-urlencoded": {
							"schema": { "$ref": "#/components/schemas/Body_thumbnail-delete_thumbnail" }
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/post/thumbnail/update": {
			"put": {
				"tags": ["thumbnail"],
				"summary": "Update Thumbnail",
				"description": "포스트 썸네일 이미지를 업데이트 (기존 삭제 후 새 이미지 업로드)",
				"operationId": "thumbnail-update_thumbnail",
				"requestBody": {
					"content": {
						"multipart/form-data": { "schema": { "$ref": "#/components/schemas/Body_thumbnail-update_thumbnail" } }
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/tasks/status/{task_id}": {
			"get": {
				"tags": ["common"],
				"summary": "Get Task Status",
				"description": "태스크 실행 상태와 결과를 조회",
				"operationId": "common-get_task_status",
				"parameters": [
					{ "name": "task_id", "in": "path", "required": true, "schema": { "type": "string", "title": "Task Id" } }
				],
				"responses": {
					"200": {
						"description": "Successful Response",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/TaskStatusResponse" } } }
					},
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/tasks/health": {
			"get": {
				"tags": ["common"],
				"summary": "Health Check",
				"description": "태스크 서비스 헬스 체크",
				"operationId": "common-health_check",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/token-cleanup/cleanup": {
			"post": {
				"tags": ["Token Cleanup"],
				"summary": "Cleanup Tokens",
				"description": "만료된 리프레시 토큰을 수동으로 정리합니다.\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Token Cleanup-cleanup_tokens",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/token-cleanup/cleanup/status/{task_id}": {
			"get": {
				"tags": ["Token Cleanup"],
				"summary": "Get Cleanup Status",
				"description": "토큰 정리 작업의 상태를 확인합니다.\n\nArgs:\n    task_id: 작업 ID\n\nReturns:\n    dict: 작업 상태와 결과",
				"operationId": "Token Cleanup-get_cleanup_status",
				"parameters": [
					{ "name": "task_id", "in": "path", "required": true, "schema": { "type": "string", "title": "Task Id" } }
				],
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/token-cleanup/health": {
			"get": {
				"tags": ["Token Cleanup"],
				"summary": "Token Cleanup Health",
				"description": "토큰 정리 서비스 상태를 확인합니다.\n\nReturns:\n    dict: 서비스 상태",
				"operationId": "Token Cleanup-token_cleanup_health",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search-reindex/reindex": {
			"post": {
				"tags": ["Search Reindex"],
				"summary": "Reindex Posts",
				"description": "전체 포스트를 수동으로 재색인합니다.\n\nCelery 태스크를 사용하여 백그라운드에서 처리됩니다.\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Reindex-reindex_posts",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search-reindex/reindex/status/{task_id}": {
			"get": {
				"tags": ["Search Reindex"],
				"summary": "Get Reindex Status",
				"description": "포스트 재색인 작업의 상태를 확인합니다.\n\nArgs:\n    task_id: 작업 ID\n\nReturns:\n    dict: 작업 상태와 결과",
				"operationId": "Search Reindex-get_reindex_status",
				"parameters": [
					{ "name": "task_id", "in": "path", "required": true, "schema": { "type": "string", "title": "Task Id" } }
				],
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/search-reindex/stats": {
			"get": {
				"tags": ["Search Reindex"],
				"summary": "Get Search Stats",
				"description": "검색 색인 통계를 직접 조회합니다.\n\nReturns:\n    dict: 색인 통계 정보",
				"operationId": "Search Reindex-get_search_stats",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search-reindex/stats/task": {
			"get": {
				"tags": ["Search Reindex"],
				"summary": "Get Search Stats Task",
				"description": "검색 색인 통계를 Celery 태스크로 조회합니다.\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Reindex-get_search_stats_task",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search-reindex/health": {
			"get": {
				"tags": ["Search Reindex"],
				"summary": "Search Health",
				"description": "검색 서비스 상태를 직접 확인합니다.\n\nReturns:\n    dict: 서비스 상태",
				"operationId": "Search Reindex-search_health",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search-reindex/health/task": {
			"get": {
				"tags": ["Search Reindex"],
				"summary": "Search Health Task",
				"description": "검색 서비스 상태를 Celery 태스크로 확인합니다.\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Reindex-search_health_task",
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } }
				}
			}
		},
		"/tasks/search/index": {
			"post": {
				"tags": ["Search Index"],
				"summary": "Index Post",
				"description": "단일 포스트를 색인합니다.\n\nArgs:\n    request: 포스트 ID가 포함된 요청 객체\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Index-index_post",
				"requestBody": {
					"content": { "application/json": { "schema": { "$ref": "#/components/schemas/PostIndexRequest" } } },
					"required": true
				},
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/search/update": {
			"put": {
				"tags": ["Search Index"],
				"summary": "Update Post",
				"description": "단일 포스트 색인을 업데이트합니다.\n\nArgs:\n    request: 포스트 ID가 포함된 요청 객체\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Index-update_post",
				"requestBody": {
					"content": { "application/json": { "schema": { "$ref": "#/components/schemas/PostIndexRequest" } } },
					"required": true
				},
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/search/delete": {
			"delete": {
				"tags": ["Search Index"],
				"summary": "Delete Post",
				"description": "단일 포스트를 색인에서 삭제합니다.\n\nArgs:\n    request: 포스트 ID가 포함된 요청 객체\n\nReturns:\n    dict: 작업 ID와 상태",
				"operationId": "Search Index-delete_post",
				"requestBody": {
					"content": { "application/json": { "schema": { "$ref": "#/components/schemas/PostIndexRequest" } } },
					"required": true
				},
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		},
		"/tasks/search/index/status/{task_id}": {
			"get": {
				"tags": ["Search Index"],
				"summary": "Get Index Status",
				"description": "색인 작업의 상태를 확인합니다.\n\nArgs:\n    task_id: 작업 ID\n\nReturns:\n    dict: 작업 상태와 결과",
				"operationId": "Search Index-get_index_status",
				"parameters": [
					{ "name": "task_id", "in": "path", "required": true, "schema": { "type": "string", "title": "Task Id" } }
				],
				"responses": {
					"200": { "description": "Successful Response", "content": { "application/json": { "schema": {} } } },
					"422": {
						"description": "Validation Error",
						"content": { "application/json": { "schema": { "$ref": "#/components/schemas/HTTPValidationError" } } }
					}
				}
			}
		}
	},
	"components": {
		"schemas": {
			"Body_avatar-delete_avatar": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle"],
				"title": "Body_avatar-delete_avatar"
			},
			"Body_avatar-update_avatar": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle", "filename", "file"],
				"title": "Body_avatar-update_avatar"
			},
			"Body_avatar-upload_avatar": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle", "filename", "file"],
				"title": "Body_avatar-upload_avatar"
			},
			"Body_banner-delete_banner": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle"],
				"title": "Body_banner-delete_banner"
			},
			"Body_banner-update_banner": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle", "filename", "file"],
				"title": "Body_banner-update_banner"
			},
			"Body_banner-upload_banner": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"user_handle": { "type": "string", "title": "User Handle" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "user_handle", "filename", "file"],
				"title": "Body_banner-upload_banner"
			},
			"Body_thumbnail-delete_thumbnail": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"post_id": { "type": "string", "title": "Post Id" }
				},
				"type": "object",
				"required": ["user_uuid", "post_id"],
				"title": "Body_thumbnail-delete_thumbnail"
			},
			"Body_thumbnail-update_thumbnail": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"post_id": { "type": "string", "title": "Post Id" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "post_id", "filename", "file"],
				"title": "Body_thumbnail-update_thumbnail"
			},
			"Body_thumbnail-upload_thumbnail": {
				"properties": {
					"user_uuid": { "type": "string", "title": "User Uuid" },
					"post_id": { "type": "string", "title": "Post Id" },
					"filename": { "type": "string", "title": "Filename" },
					"file": { "type": "string", "format": "binary", "title": "File" }
				},
				"type": "object",
				"required": ["user_uuid", "post_id", "filename", "file"],
				"title": "Body_thumbnail-upload_thumbnail"
			},
			"HTTPValidationError": {
				"properties": {
					"detail": { "items": { "$ref": "#/components/schemas/ValidationError" }, "type": "array", "title": "Detail" }
				},
				"type": "object",
				"title": "HTTPValidationError"
			},
			"PostIndexRequest": {
				"properties": { "post_id": { "type": "string", "title": "Post Id" } },
				"type": "object",
				"required": ["post_id"],
				"title": "PostIndexRequest"
			},
			"ProfileImageDeleteRequest": {
				"properties": { "user_id": { "type": "string", "title": "User Id" } },
				"type": "object",
				"required": ["user_id"],
				"title": "ProfileImageDeleteRequest"
			},
			"ProfileImageOauthUploadRequest": {
				"properties": {
					"user_id": { "type": "string", "title": "User Id" },
					"image_url": { "type": "string", "title": "Image Url" }
				},
				"type": "object",
				"required": ["user_id", "image_url"],
				"title": "ProfileImageOauthUploadRequest"
			},
			"TaskResponse": {
				"properties": {
					"task_id": { "type": "string", "title": "Task Id" },
					"status": { "type": "string", "title": "Status" },
					"message": { "type": "string", "title": "Message" }
				},
				"type": "object",
				"required": ["task_id", "status", "message"],
				"title": "TaskResponse"
			},
			"TaskStatusResponse": {
				"properties": {
					"task_id": { "type": "string", "title": "Task Id" },
					"status": { "type": "string", "title": "Status" },
					"result": { "additionalProperties": true, "type": "object", "title": "Result" },
					"error": { "type": "string", "title": "Error" }
				},
				"type": "object",
				"required": ["task_id", "status"],
				"title": "TaskStatusResponse"
			},
			"ValidationError": {
				"properties": {
					"loc": {
						"items": { "anyOf": [{ "type": "string" }, { "type": "integer" }] },
						"type": "array",
						"title": "Location"
					},
					"msg": { "type": "string", "title": "Message" },
					"type": { "type": "string", "title": "Error Type" }
				},
				"type": "object",
				"required": ["loc", "msg", "type"],
				"title": "ValidationError"
			}
		}
	}
}
